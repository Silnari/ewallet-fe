(this["webpackJsonpewallet-fe"]=this["webpackJsonpewallet-fe"]||[]).push([[0],{403:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(15),c=n.n(r),o=n(20),i=n(12),s=n.n(i),l=n(18),u=n(8),d=n(1),j=Object(a.createContext)({token:null}),b=function(e){var t=e.children,n=Object(a.useState)(""),r=Object(u.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(""),l=Object(u.a)(s,2),b=l[0],h=l[1],O=Object(o.g)();Object(a.useEffect)((function(){var e=localStorage.getItem("token");e&&i(e)}),[]);return Object(d.jsx)(j.Provider,{value:{token:c,logIn:function(e){localStorage.setItem("token",e),i(e),O.push("/")},logOut:function(){localStorage.removeItem("token"),i(null),O.push("/login")},registerSucess:b,setRegisterSuccess:h},children:t})},h=function(){return Object(a.useContext)(j)},O=n(430),m=n(431),x=n(460),f=n(436),p=n(461),v=n(426),g=n(85);function y(e){var t=e.welcomeText;return Object(d.jsxs)(v.a,{mb:4,children:[Object(d.jsxs)(g.a,{display:"inline",variant:"h4",align:"center",children:[t,"\xa0"]}),Object(d.jsx)(g.a,{display:"inline",variant:"h4",color:"primary",children:"eWallet"})]})}var C=n(404),w=n(428),S=Object(C.a)(w.a)({height:"100vh",alignItems:"center",justifyContent:"center",display:"flex"}),B=n(429),k=Object(C.a)(B.a)({padding:"20px 35px 20px 35px",width:390,minHeight:408}),A=n(205),T=n.n(A).a.create({baseURL:"https://ewallet-be.mybluemix.net/"}),I=n(34),E=n(459);function N(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],c=h(),i=c.logIn,j=c.registerSucess,b=c.setRegisterSuccess,v=Object(o.g)(),g=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.login,a=t.password,e.prev=1,e.next=4,T({method:"post",url:"api/user/authenticate",data:{login:n,password:a}});case 4:200===(c=e.sent).status&&i(c.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),401===e.t0.response.status?r("Invalid username or password"):r("Could not login");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),C=Object(I.a)({initialValues:{login:"",password:""},onSubmit:g});return Object(d.jsxs)(S,{children:[Object(d.jsx)(k,{children:Object(d.jsx)(O.a,{children:Object(d.jsx)("form",{onSubmit:C.handleSubmit,children:Object(d.jsxs)(m.a,{container:!0,align:"center",direction:"column",spacing:3,children:[Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(y,{welcomeText:"Log in to"})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(x.a,{id:"login",label:"Login",variant:"outlined",fullWidth:!0,size:"small",value:C.values.login,onChange:C.handleChange})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(x.a,{id:"password",type:"password",label:"Password",variant:"outlined",fullWidth:!0,size:"small",onChange:C.handleChange,value:C.values.password})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Login"})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(f.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){return v.push("/register")},children:"No account? Register"})})]})})})}),Object(d.jsx)(p.a,{open:!!n,autoHideDuration:7e3,onClose:function(){return r("")},children:Object(d.jsx)(E.a,{severity:"error",onClose:function(){return r("")},children:n})}),Object(d.jsx)(p.a,{open:!!j,autoHideDuration:7e3,onClose:function(){return b("")},children:Object(d.jsx)(E.a,{severity:"success",onClose:function(){return b("")},children:j})})]})}var M=n(14),D=M.c({email:M.d("Enter your email").email("Enter a valid email").required("Email is required"),login:M.d("Enter your login").required("Login is required"),password:M.d("Enter your password").min(5,"Password should be of minimum 5 characters length").required("Password is required")});function W(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],c=h().setRegisterSuccess,i=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.login,a=t.email,o=t.password,e.prev=1,e.next=4,T({method:"post",url:"api/user/register",data:{login:n,email:a,password:o}});case 4:200===e.sent.status&&(c("User registered successfully"),b.push("login/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),400===e.t0.response.status?r("Login is already taken"):r("Could not register user");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),j=Object(I.a)({initialValues:{login:"",email:"",password:""},validationSchema:D,onSubmit:i}),b=Object(o.g)();return Object(d.jsxs)(S,{children:[Object(d.jsx)(k,{children:Object(d.jsx)(O.a,{children:Object(d.jsx)("form",{onSubmit:j.handleSubmit,children:Object(d.jsxs)(m.a,{container:!0,align:"center",direction:"column",spacing:3,children:[Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(y,{welcomeText:"Register to"})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(x.a,{id:"login",label:"Login",variant:"outlined",fullWidth:!0,size:"small",value:j.values.login,onChange:j.handleChange,error:j.touched.login&&Boolean(j.errors.login),helperText:j.touched.login&&j.errors.login})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(x.a,{id:"email",label:"Email",variant:"outlined",fullWidth:!0,size:"small",value:j.values.email,onChange:j.handleChange,error:j.touched.email&&Boolean(j.errors.email),helperText:j.touched.email&&j.errors.email})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(x.a,{id:"password",type:"password",label:"Password",variant:"outlined",fullWidth:!0,size:"small",value:j.values.password,onChange:j.handleChange,error:j.touched.password&&Boolean(j.errors.password),helperText:j.touched.password&&j.errors.password})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Register"})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(f.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){return b.push("/login")},children:"Already have account? Log in"})})]})})})}),Object(d.jsx)(p.a,{open:!!n,autoHideDuration:7e3,onClose:function(){return r("")},children:Object(d.jsx)(E.a,{severity:"error",onClose:function(){return r("")},children:n})})]})}var R=n(447),L=n(211),q=n(40),z=n(464),V=n(438),F=n(435),P=n(410),Y=n(439),K=n(440),U=n(158),H=n(4),G=Object(U.a)((function(e){return{drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(q.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(L.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(0,1)},e.mixins.toolbar)}}));function J(e){var t,n,a=e.drawerOpen,r=e.items,c=e.currentItem,o=e.setCurrentItem,i=G();return Object(d.jsxs)(z.a,{variant:"permanent",className:Object(H.default)(i.drawer,(t={},Object(q.a)(t,i.drawerOpen,a),Object(q.a)(t,i.drawerClose,!a),t)),classes:{paper:Object(H.default)((n={},Object(q.a)(n,i.drawerOpen,a),Object(q.a)(n,i.drawerClose,!a),n))},children:[Object(d.jsx)("div",{className:i.toolbar,children:Object(d.jsx)(g.a,{variant:"h6",color:"primary",children:"eWallet"})}),Object(d.jsx)(V.a,{}),Object(d.jsx)(F.a,{children:Object.entries(r).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(d.jsxs)(P.a,{button:!0,onClick:function(){return o(n)},selected:c===n,children:[Object(d.jsx)(Y.a,{children:a.icon}),Object(d.jsx)(K.a,{primary:a.title})]},n)}))})]})}var X=n(441),Q=n(442),Z=n(437),$=n(230),_=n(212),ee=n.n(_),te=n(213),ne=n.n(te),ae=Object(U.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},logoutButton:{marginLeft:"auto"}}}));function re(e){var t=e.drawerOpen,n=e.handleDrawerOpen,a=e.handleDrawerClose,r=ae(),c=h().logOut;return Object(d.jsx)(X.a,{position:"fixed",className:Object(H.default)(r.appBar,Object(q.a)({},r.appBarShift,t)),children:Object(d.jsxs)(Q.a,{children:[Object(d.jsx)(Z.a,{color:"inherit","aria-label":"open drawer",onClick:t?a:n,edge:"start",className:r.menuButton,children:Object(d.jsx)(ee.a,{})}),Object(d.jsx)($.a,{in:!t,children:Object(d.jsx)(g.a,{variant:"h6",noWrap:!0,children:"eWallet"})}),Object(d.jsx)(Z.a,{color:"inherit",className:r.logoutButton,onClick:c,children:Object(d.jsx)(ne.a,{})})]})})}function ce(e){var t=e.navItems,n=e.currentNavItem,r=e.setCurrentNavItem,c=Object(a.useState)(!1),o=Object(u.a)(c,2),i=o[0],s=o[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(re,{drawerOpen:i,handleDrawerClose:function(){s(!1)},handleDrawerOpen:function(){s(!0)}}),Object(d.jsx)(J,{drawerOpen:i,items:t,currentItem:n,setCurrentItem:r})]})}var oe=n(458),ie=n(443),se=n(214),le=n.n(se),ue=n(215),de=n.n(ue),je=n(59),be=n.n(je),he=function(e,t){var n=be()(e);return"w"===t?n.startOf("isoweek").format("MMMM Do")+" - "+n.clone().startOf("isoweek").add(6,"d").format("MMMM Do[, ]YYYY"):"M"===t?n.format("MMMM[, ]YYYY"):"y"===t?n.format("YYYY"):void 0},Oe=function(e){return be()(e).format("dddd, MMMM Do YYYY")},me=function(e,t){var n=be()(e);return"d"===t?n.add(7,t).toDate():n.add(1,t).toDate()},xe=function(e,t,n){return e.filter((function(e){return be()(e.date).isSame(be()(t),function(e){return"w"===e?"isoWeek":"M"===e?"month":"year"}(n))}))},fe=Object(U.a)((function(){var e;return{dateBox:(e={borderRadius:20,display:"inline-box",padding:"10px 20px 10px 20px",backgroundColor:"#fff",width:410},Object(q.a)(e,"display","flex"),Object(q.a)(e,"justifyContent","center"),e),datePicker:{minWidth:120}}}));function pe(e){var t=e.date,n=e.setDate,r=e.periodOfTime,c=e.setPeriodOfTime,o=Object(a.useState)(!1),i=Object(u.a)(o,2),s=i[0],l=i[1],j=fe();return Object(d.jsxs)(m.a,{container:!0,direction:"column",spacing:1,children:[Object(d.jsx)(m.a,{item:!0,children:Object(d.jsxs)(oe.a,{id:"period-of-time",value:r,onChange:function(e){var t=e.target.value;c(t),l(!1),n(new Date)},className:j.datePicker,children:[Object(d.jsx)(ie.a,{value:"w",children:"Week"}),Object(d.jsx)(ie.a,{value:"M",children:"Month"}),Object(d.jsx)(ie.a,{value:"y",children:"Year"})]})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsxs)(m.a,{container:!0,direction:"row",alignItems:"center",justify:"center",children:[Object(d.jsx)(Z.a,{color:"inherit",onClick:function(){n(function(e,t){var n=be()(e);return"d"===t?n.subtract(7,t).toDate():n.subtract(1,t).toDate()}(t,r)),l(!0)},children:Object(d.jsx)(le.a,{fontSize:"large"})}),Object(d.jsx)(v.a,{className:j.dateBox,children:Object(d.jsx)(g.a,{variant:"h6",children:he(t,r)})}),Object(d.jsx)(Z.a,{color:"inherit",onClick:function(){n(me(t,r)),function(e,t){return be()(new Date).isSame(be()(me(e,t)),"day")}(t,r)&&l(!1)},disabled:!s,children:Object(d.jsx)(de.a,{fontSize:"large"})})]})})]})}var ve=n(223),ge=n.n(ve),ye=n(222),Ce=n.n(ye),we=n(126),Se=n.n(we),Be=n(127),ke=n.n(Be),Ae=n(221),Te=n.n(Ae),Ie=n(444),Ee=n(445),Ne=n(446),Me=n(448),De=n(67),We=n(35),Re=n(457),Le=Object(a.createContext)();function qe(e){var t=e.children,n=Object(a.useState)([]),r=Object(u.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(null),j=Object(u.a)(i,2),b=j[0],O=j[1],m=Object(a.useState)(!1),x=Object(u.a)(m,2),f=x[0],p=x[1],v=Object(a.useState)(0),g=Object(u.a)(v,2),y=g[0],C=g[1],w=h().token,S=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,T({method:"get",url:"api/account/".concat(w)});case 3:200===(t=e.sent).status&&(o(t.data),O(t.data[0]),p(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,T({method:"get",url:"api/account/".concat(w)});case 3:200===(t=e.sent).status&&(o(t.data),p(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){S()}),[]),Object(a.useEffect)((function(){return B()}),[y]);return Object(d.jsx)(Le.Provider,{value:{accountList:c,selectedAccount:b,setSelectedById:function(e){O(c.find((function(t){return t.id===e})))},setRefreshKey:C,isAccountLoading:f},children:t})}var ze=function(){return Object(a.useContext)(Le)},Ve=Object(a.createContext)();function Fe(e){var t=e.children,n=Object(a.useState)([]),r=Object(u.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(!1),j=Object(u.a)(i,2),b=j[0],O=j[1],m=Object(a.useState)(0),x=Object(u.a)(m,2),f=x[0],p=x[1],v=ze().selectedAccount,g=h().token,y=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==v&&null!==v){e.next=2;break}return e.abrupt("return");case 2:return O(!0),e.next=5,T({method:"get",url:"api/transaction/".concat(g,"/").concat(null===v||void 0===v?void 0:v.id)});case 5:if(t=e.sent,0!==v.id||200!==t.status){e.next=10;break}return o(t.data),O(!1),e.abrupt("return");case 10:return e.next=12,T({method:"get",url:"api/transfer/to/".concat(v.id)});case 12:return n=e.sent,e.next=15,T({method:"get",url:"api/transfer/from/".concat(v.id)});case 15:a=e.sent,200===t.status&&200===n.status&&200===a.status&&(o(t.data.concat(n.data.map((function(e){return e.transactionType="TRANSFER-INCOME",e.category="Transfer",e})),a.data.map((function(e){return e.transactionType="TRANSFER-OUTCOME",e.category="Transfer",e})))),O(!1));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return y()}),[v,f]),Object(d.jsx)(Ve.Provider,{value:{transactionList:c,isTransactionLoading:b,setRefreshKey:p},children:t})}var Pe=function(){return Object(a.useContext)(Ve)},Ye=M.c({value:M.b().typeError("Value must be a number").positive("Value must be grater than zero").required("Value is required"),note:M.d("Enter note"),category:M.d("Enter category").required("Category is required"),date:M.a("Enter date").typeError("Enter date with valid format (dd/mm/yyyy)").max(new Date,"Date cannot be in the future").required("Date is required")});function Ke(e){var t=e.open,n=e.setOpen,a=e.transactionType,r=Pe().setRefreshKey,c=ze(),o=c.accountList,i=c.selectedAccount,u=function(){var e=Object(l.a)(s.a.mark((function e(t){var c,o,i,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.account,o=t.value,i=t.note,l=t.category,u=t.date,e.next=3,T({method:"post",url:"api/transaction",data:{accountId:c,value:o,note:i,category:l,date:u,transactionType:a}});case 3:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=Object(I.a)({enableReinitialize:!0,initialValues:{account:0!==(null===i||void 0===i?void 0:i.id)?i.id:o[0].id,value:0,note:"",category:"",date:new Date((new Date).setHours(0,0,0,0))},validationSchema:Ye,onSubmit:u});return Object(d.jsxs)(Ie.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsxs)(Ee.a,{children:["Add new ",a.toLowerCase()]}),Object(d.jsx)(Ne.a,{children:Object(d.jsxs)("form",{onSubmit:j.handleSubmit,children:[Object(d.jsx)(oe.a,{id:"account",name:"account",value:j.values.account,fullWidth:!0,onChange:j.handleChange,error:j.touched.account&&Boolean(j.errors.account),children:o.filter((function(e){return 0!==e.id})).map((function(e){return Object(d.jsx)(ie.a,{value:e.id,children:e.name},e.id)}))}),Object(d.jsx)(x.a,{margin:"dense",id:"value",label:"Value",fullWidth:!0,value:j.values.value,onChange:j.handleChange,error:j.touched.value&&Boolean(j.errors.value),helperText:j.touched.value&&j.errors.value}),Object(d.jsx)(x.a,{margin:"dense",id:"note",label:"Note",fullWidth:!0,value:j.values.note,onChange:j.handleChange,error:j.touched.note&&Boolean(j.errors.note),helperText:j.touched.note&&j.errors.note}),Object(d.jsx)(x.a,{margin:"dense",id:"category",label:"Category",fullWidth:!0,value:j.values.category,onChange:j.handleChange,error:j.touched.category&&Boolean(j.errors.category),helperText:j.touched.category&&j.errors.category}),Object(d.jsx)(We.a,{utils:De.a,children:Object(d.jsx)(Re.a,{disableToolbar:!0,maxDate:new Date,format:"MM/dd/yyyy",margin:"normal",id:"date",label:"Date",fullWidth:!0,autoOk:!0,KeyboardButtonProps:{"aria-label":"change date"},value:j.values.date,onChange:function(e){return j.setFieldValue("date",e)},error:j.touched.date&&Boolean(j.errors.date),helperText:j.touched.date&&j.errors.date})}),Object(d.jsxs)(Me.a,{children:[Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Add"})]})]})})]})}var Ue=n(451),He=n(465),Ge=n(452),Je=n(216),Xe=n.n(Je),Qe=n(217),Ze=n.n(Qe),$e=n(218),_e=n.n($e),et=M.c({value:M.b().typeError("Value must be a number").positive("Value must be grater than zero").required("Value is required"),note:M.d("Enter note"),category:M.d("Enter category").required("Category is required"),date:M.a("Enter date").max(new Date,"Date cannot be in the future").required("Date is required")});function tt(e){var t=e.open,n=e.setOpen,a=e.transaction,r=Pe().setRefreshKey,c=function(){var e=Object(l.a)(s.a.mark((function e(t){var c,o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.value,o=t.note,i=t.category,l=t.date,e.next=3,T({method:"put",url:"/api/transaction/".concat(a.id),data:{value:c,note:o,category:i,date:l}});case 3:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({method:"delete",url:"/api/transaction/".concat(a.id)});case 2:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=Object(I.a)({enableReinitialize:!0,initialValues:a||{},validationSchema:et,onSubmit:c});return Object(d.jsxs)(Ie.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsx)(Ee.a,{children:"Modify transaction"}),Object(d.jsx)(Ne.a,{children:Object(d.jsxs)("form",{onSubmit:i.handleSubmit,children:[Object(d.jsx)(x.a,{margin:"dense",id:"value",label:"Value",fullWidth:!0,value:i.values.value,onChange:i.handleChange,error:i.touched.value&&Boolean(i.errors.value),helperText:i.touched.value&&i.errors.value}),Object(d.jsx)(x.a,{margin:"dense",id:"note",label:"Note",fullWidth:!0,value:i.values.note,onChange:i.handleChange,error:i.touched.note&&Boolean(i.errors.note),helperText:i.touched.note&&i.errors.note}),Object(d.jsx)(x.a,{margin:"dense",id:"category",label:"Category",fullWidth:!0,value:i.values.category,onChange:i.handleChange,error:i.touched.category&&Boolean(i.errors.category),helperText:i.touched.category&&i.errors.category}),Object(d.jsx)(We.a,{utils:De.a,children:Object(d.jsx)(Re.a,{disableToolbar:!0,maxDate:new Date,format:"MM/dd/yyyy",margin:"normal",id:"date",label:"Date",fullWidth:!0,autoOk:!0,KeyboardButtonProps:{"aria-label":"change date"},value:i.values.date,onChange:function(e){return i.setFieldValue("date",e)},error:i.touched.date&&Boolean(i.errors.date),helperText:i.touched.date&&i.errors.date})}),Object(d.jsxs)(Me.a,{children:[Object(d.jsx)(f.a,{variant:"contained",color:"secondary",onClick:o,children:"Delete"}),Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Save"})]})]})})]})}var nt=n(463),at=n(125),rt=n.n(at),ct=M.c({value:M.b().typeError("Value must be a number").positive("Value must be grater than zero").required("Value is required"),note:M.d("Enter note"),date:M.a("Enter date").max(new Date,"Date cannot be in the future").required("Date is required")});function ot(e){var t=e.open,n=e.setOpen,a=e.transfer,r=Pe().setRefreshKey,c=ze().accountList,o=function(){var e=Object(l.a)(s.a.mark((function e(t){var c,o,i,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.toAccount,o=t.fromAccount,i=t.value,l=t.note,u=t.date,e.next=3,T({method:"put",url:"api/transfer/".concat(a.id),data:{toAccountId:c,fromAccountId:o,value:i,note:l,date:u}});case 3:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({method:"delete",url:"/api/transfer/".concat(a.id)});case 2:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=Object(I.a)({enableReinitialize:!0,initialValues:a?{fromAccount:a.fromAccountId,toAccount:a.toAccountId,value:a.value,note:a.note,date:a.date}:{},validationSchema:ct,onSubmit:o});return Object(d.jsxs)(Ie.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsx)(Ee.a,{children:"Modify transfer"}),Object(d.jsx)(Ne.a,{children:Object(d.jsxs)("form",{onSubmit:u.handleSubmit,children:[Object(d.jsxs)(m.a,{container:!0,align:"center",direction:"row",children:[Object(d.jsxs)(m.a,{item:!0,xs:5,children:[Object(d.jsx)(nt.a,{align:"left",htmlFor:"fromAccount",children:"From:"}),Object(d.jsx)(oe.a,{id:"fromAccount",name:"fromAccount",fullWidth:!0,value:u.values.fromAccount,onChange:u.handleChange,error:u.touched.fromAccount&&Boolean(u.errors.fromAccount),children:c.filter((function(e){return 0!==e.id})).map((function(e){return Object(d.jsx)(ie.a,{value:e.id,children:e.name},e.id)}))})]}),Object(d.jsx)(m.a,{item:!0,xs:2,style:{paddingTop:20},children:Object(d.jsx)(rt.a,{})}),Object(d.jsxs)(m.a,{item:!0,xs:5,children:[Object(d.jsx)(nt.a,{align:"left",htmlFor:"toAccount",children:"To:"}),Object(d.jsx)(oe.a,{fullWidth:!0,id:"toAccount",name:"toAccount",value:u.values.toAccount,onChange:u.handleChange,error:u.touched.toAccount&&Boolean(u.errors.toAccount),children:c.filter((function(e){return![u.values.fromAccount,0].includes(e.id)})).map((function(e){return Object(d.jsx)(ie.a,{value:e.id,children:e.name},e.id)}))})]})]}),Object(d.jsx)(x.a,{margin:"dense",id:"value",label:"Value",fullWidth:!0,value:u.values.value,onChange:u.handleChange,error:u.touched.value&&Boolean(u.errors.value),helperText:u.touched.value&&u.errors.value}),Object(d.jsx)(x.a,{margin:"dense",id:"note",label:"Note",fullWidth:!0,value:u.values.note,onChange:u.handleChange,error:u.touched.note&&Boolean(u.errors.note),helperText:u.touched.note&&u.errors.note}),Object(d.jsx)(We.a,{utils:De.a,children:Object(d.jsx)(Re.a,{disableToolbar:!0,maxDate:new Date,format:"MM/dd/yyyy",margin:"normal",id:"date",label:"Date",fullWidth:!0,autoOk:!0,KeyboardButtonProps:{"aria-label":"change date"},value:u.values.date,onChange:function(e){return u.setFieldValue("date",e)},error:u.touched.date&&Boolean(u.errors.date),helperText:u.touched.date&&u.errors.date})}),Object(d.jsxs)(Me.a,{children:[Object(d.jsx)(f.a,{variant:"contained",color:"secondary",onClick:i,children:"Delete"}),Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Save"})]})]})})]})}var it=n(45),st=n.n(it),lt=function(e){return dt(e,["INCOME","TRANSFER-INCOME"])},ut=function(e){return dt(e,["OUTCOME","TRANSFER-OUTCOME"])},dt=function(e,t){return e.filter((function(e){return t.includes(e.transactionType)}))},jt=function(e){return st.a.sumBy(lt(e),"value")-st.a.sumBy(ut(e),"value")},bt=function(e,t){return st.a.round(e+jt(t),2)},ht=function(e){return st.a.round(jt(lt(e)),2)},Ot=function(e){return-st.a.round(jt(ut(e)),2)},mt=function(e){return st.a.round(jt(e),2)},xt=function(e,t){var n=st.a.orderBy(st.a.groupBy(e,t),[function(e){return st.a.sumBy(e,"value")}],"desc");return st.a.map(n,(function(e){return st.a.orderBy(e,"value","desc")}))},ft=Object(U.a)((function(e){return{nested:{marginLeft:e.spacing(4),borderRadius:50,width:450},transactionSubItem:{textAlign:"right"},icnomeItem:{color:e.green,backgroundColor:e.white,borderRadius:20,marginBottom:5},outcomeItem:{color:e.red,backgroundColor:e.white,borderRadius:20,marginBottom:5},incomeAvatar:{backgroundColor:e.green},outcomeAvatar:{backgroundColor:e.red},incomeIcon:{color:e.green},outcomeIcon:{color:e.red}}}));function pt(e){var t=e.header,n=e.icon,r=e.transactionList,c=e.sortBy,o=e.type,i=Object(a.useState)(!1),s=Object(u.a)(i,2),l=s[0],j=s[1],b=Object(a.useState)(!1),h=Object(u.a)(b,2),O=h[0],m=h[1],x=Object(a.useState)(!1),f=Object(u.a)(x,2),p=f[0],v=f[1],g=Object(a.useState)(null),y=Object(u.a)(g,2),C=y[0],w=y[1],S=ze().accountList,B=ft(),k=function(e){return"category"===c?Oe(e.date):e.category};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(P.a,{className:"INCOME"===o?B.icnomeItem:B.outcomeItem,button:!0,onClick:function(){return j(!l)},children:[Object(d.jsx)(Ue.a,{children:Object(d.jsx)(He.a,{className:"INCOME"===o?B.incomeAvatar:B.outcomeAvatar,variant:"rounded",children:n})}),Object(d.jsx)(K.a,{primary:t,secondary:"Transactions: ".concat(null===r||void 0===r?void 0:r.length)}),Object(d.jsx)(K.a,{className:B.transactionSubItem,primary:"".concat(mt(r)," z\u0142")}),l?Object(d.jsx)(Xe.a,{}):Object(d.jsx)(Ze.a,{})]},t+o),Object(d.jsx)(Ge.a,{in:l,timeout:"auto",unmountOnExit:!0,children:Object(d.jsx)(F.a,{component:"div",disablePadding:!0,children:r.map((function(e){return Object(d.jsxs)(P.a,{className:B.nested,button:!0,onClick:function(){!function(e){w(e),["INCOME","OUTCOME"].includes(e.transactionType)?m(!0):v(!0)}(e)},children:[Object(d.jsx)(Y.a,{children:Object(d.jsx)(_e.a,{fontSize:"small",className:"INCOME"===o?B.incomeIcon:B.outcomeIcon})}),Object(d.jsx)(K.a,{primary:"".concat(e.value," z\u0142"),secondary:e.note}),Object(d.jsx)(K.a,{className:B.transactionSubItem,secondary:k(e)})]},e.id)}))})}),Object(d.jsx)(tt,{open:O,setOpen:m,transaction:C}),Object(d.jsx)(ot,{open:p,setOpen:v,transfer:C,accountList:S})]})}function vt(e){var t=e.sortBy,n=e.date,a=e.periodOfTime,r=Pe().transactionList,c=function(){return"category"===t?Object(d.jsx)(Se.a,{}):Object(d.jsx)(ke.a,{})},o=function(e){return"date"===t?Oe(e[0].date):e[0].category};return Object(d.jsxs)(F.a,{children:[xt(xe(lt(r),n,a),t).map((function(e){return Object(d.jsx)(pt,{type:"INCOME",icon:c(),transactionList:e,sortBy:t,header:o(e)},e[0][t]+"INCOME")})),xt(xe(ut(r),n,a),t).map((function(e){return Object(d.jsx)(pt,{type:"OUTCOME",icon:c(),transactionList:e,sortBy:t,header:o(e)},e[0][t]+"OUTCOME")}))]})}var gt=n(450),yt=Object(U.a)((function(e){return{spinner:{height:"40vh",alignItems:"center",justifyContent:"center",display:"flex"}}}));function Ct(){var e=yt();return Object(d.jsx)(v.a,{className:e.spinner,children:Object(d.jsx)(gt.a,{})})}var wt=n(204),St=n(219),Bt=n.n(St),kt=Object(U.a)((function(e){return{root:{position:"relative"},content:function(t){return{padding:"15px 14px",borderRadius:10,width:195,height:50,fontWeight:"bold",backgroundColor:e.white,color:t.color}},inputLabel:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"}}}));function At(e){var t=e.id,n=e.label,r=e.children,o=e.color,i=Object(a.useState)(0),s=Object(u.a)(i,2),l=s[0],j=s[1],b=Object(a.useRef)(null),h=kt({color:o});return Object(a.useEffect)((function(){var e=c.a.findDOMNode(b.current);j(null!=e?e.offsetWidth:0)}),[n]),Object(d.jsxs)("div",{style:{position:"relative",marginTop:"8px"},children:[Object(d.jsx)(nt.a,{ref:b,htmlFor:t,variant:"outlined",className:h.inputLabel,shrink:!0,children:n}),Object(d.jsx)("div",{className:h.root,children:Object(d.jsxs)("div",{id:t,className:h.content,children:[r,Object(d.jsx)(Bt.a,{notched:!0,labelWidth:l})]})})]})}var Tt=Object(wt.a)(v.a)({border:"2px solid",borderRadius:10,padding:10,width:195,fontWeight:"bold",backgroundColor:"#fff"}),It=Object(R.a)((function(e){return{positiveBalance:{color:e.green},negativeBalance:{color:e.red},positiveBalanceBox:{borderColor:e.green},negativeBalanceBox:{borderColor:e.red}}}));function Et(e){var t=e.date,n=e.periodOfTime,a=It(),r=Pe().transactionList,c=ze().selectedAccount,o=xe(r,t,n);return Object(d.jsx)(v.a,{children:Object(d.jsxs)(m.a,{container:!0,alignItems:"center",direction:"column",spacing:1,children:[Object(d.jsx)(m.a,{item:!0,children:Object(d.jsxs)(m.a,{container:!0,spacing:2,children:[Object(d.jsx)(m.a,{item:!0,children:Object(d.jsxs)(Tt,{className:"".concat(a.positiveBalanceBox," ").concat(a.positiveBalance),children:[ht(o)," z\u0142"]})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsxs)(Tt,{className:"".concat(a.negativeBalanceBox," ").concat(a.negativeBalance),children:[Ot(o)," z\u0142"]})})]})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsxs)(m.a,{container:!0,spacing:2,children:[Object(d.jsx)(m.a,{item:!0,children:Object(d.jsxs)(At,{id:"monthly",label:"Monthly",color:mt(o)>0?"green":"red",children:[mt(o)," z\u0142"]})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsxs)(At,{id:"account",label:"Account",color:bt(c.startBalance,r)>0?"green":"red",children:[bt(c.startBalance,r)," ","z\u0142"]})})]})})]})})}var Nt=M.c({value:M.b().typeError("Value must be a number").positive("Value must be grater than zero").required("Value is required"),note:M.d("Enter note"),date:M.a("Enter date").max(new Date,"Date cannot be in the future").required("Date is required")});function Mt(e){var t,n=e.open,a=e.setOpen,r=Pe().setRefreshKey,c=ze(),o=c.accountList,i=c.selectedAccount,u=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,c,o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.toAccount,c=t.fromAccount,o=t.value,i=t.note,l=t.date,e.next=3,T({method:"post",url:"api/transfer",data:{toAccountId:n,fromAccountId:c,value:o,note:i,date:l}});case 3:200===e.sent.status&&(a(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=Object(I.a)({enableReinitialize:!0,initialValues:{fromAccount:0!==i.id?i.id:o[0].id,toAccount:null===(t=o[1])||void 0===t?void 0:t.id,value:0,note:"",date:new Date((new Date).setHours(0,0,0,0))},validationSchema:Nt,onSubmit:u});return Object(d.jsxs)(Ie.a,{open:n,onClose:function(){return a(!1)},children:[Object(d.jsx)(Ee.a,{children:"Add new transfer"}),Object(d.jsx)(Ne.a,{children:Object(d.jsxs)("form",{onSubmit:j.handleSubmit,children:[Object(d.jsxs)(m.a,{container:!0,align:"center",direction:"row",children:[Object(d.jsxs)(m.a,{item:!0,xs:5,children:[Object(d.jsx)(nt.a,{align:"left",htmlFor:"fromAccount",children:"From:"}),Object(d.jsx)(oe.a,{id:"fromAccount",name:"fromAccount",fullWidth:!0,value:j.values.fromAccount,onChange:j.handleChange,error:j.touched.fromAccount&&Boolean(j.errors.fromAccount),children:o.filter((function(e){return 0!==e.id})).map((function(e){return Object(d.jsx)(ie.a,{value:e.id,children:e.name},e.id)}))})]}),Object(d.jsx)(m.a,{item:!0,xs:2,style:{paddingTop:20},children:Object(d.jsx)(rt.a,{})}),Object(d.jsxs)(m.a,{item:!0,xs:5,children:[Object(d.jsx)(nt.a,{align:"left",htmlFor:"toAccount",children:"To:"}),Object(d.jsx)(oe.a,{fullWidth:!0,id:"toAccount",name:"toAccount",value:j.values.toAccount,onChange:j.handleChange,error:j.touched.toAccount&&Boolean(j.errors.toAccount),children:o.filter((function(e){return![j.values.fromAccount,0].includes(e.id)})).map((function(e){return Object(d.jsx)(ie.a,{value:e.id,children:e.name},e.id)}))})]})]}),Object(d.jsx)(x.a,{margin:"dense",id:"value",label:"Value",fullWidth:!0,value:j.values.value,onChange:j.handleChange,error:j.touched.value&&Boolean(j.errors.value),helperText:j.touched.value&&j.errors.value}),Object(d.jsx)(x.a,{margin:"dense",id:"note",label:"Note",fullWidth:!0,value:j.values.note,onChange:j.handleChange,error:j.touched.note&&Boolean(j.errors.note),helperText:j.touched.note&&j.errors.note}),Object(d.jsx)(We.a,{utils:De.a,children:Object(d.jsx)(Re.a,{disableToolbar:!0,maxDate:new Date,format:"MM/dd/yyyy",margin:"normal",id:"date",label:"Date",fullWidth:!0,autoOk:!0,KeyboardButtonProps:{"aria-label":"change date"},value:j.values.date,onChange:function(e){return j.setFieldValue("date",e)},error:j.touched.date&&Boolean(j.errors.date),helperText:j.touched.date&&j.errors.date})}),Object(d.jsxs)(Me.a,{children:[Object(d.jsx)(f.a,{onClick:function(){return a(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Add"})]})]})})]})}var Dt=n(220),Wt=n.n(Dt),Rt=n(69),Lt=Object(U.a)((function(e){return{tabName:{color:e.green},infoBox:{border:"2px solid",borderRadius:10,padding:15,borderColor:e.green,backgroundColor:e.white}}}));function qt(){var e=Lt();return Object(d.jsxs)(v.a,{mt:2,className:e.infoBox,children:[Object(d.jsx)(Wt.a,{fontSize:"large",className:e.tabName}),Object(d.jsxs)(g.a,{variant:"h6",children:["Please add your first account in"," ",Object(d.jsx)(Rt.b,{className:e.tabName,onClick:void 0,children:"Manage accounts"})," ","tab"]})]})}var zt=Object(C.a)(oe.a)({maxHeight:50,minWidth:162,maxWidth:162,marginLeft:-20,marginRight:20,backgroundColor:"#fff"});function Vt(){var e=ze(),t=e.accountList,n=e.selectedAccount,a=e.setSelectedById;return Object(d.jsx)(zt,{variant:"outlined",value:n.id,onChange:function(e){a(e.target.value)},children:t.map((function(e){return Object(d.jsx)(ie.a,{value:e.id,children:e.name},e.id)}))})}var Ft=Object(U.a)((function(e){return{incomeButton:{color:e.green},outcomeButton:{color:e.red},sortButton:{color:e.black,backgroundColor:e.white},accountPicker:{maxHeight:50,minWidth:162,maxWidth:162,marginLeft:-20,marginRight:20,backgroundColor:e.white}}}));function Pt(){var e=Object(a.useState)(new Date),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)("M"),o=Object(u.a)(c,2),i=o[0],s=o[1],l=Object(a.useState)(!1),j=Object(u.a)(l,2),b=j[0],h=j[1],O=Object(a.useState)(!1),x=Object(u.a)(O,2),f=x[0],p=x[1],y=Object(a.useState)("INCOME"),C=Object(u.a)(y,2),S=C[0],B=C[1],k=ze(),A=k.accountList,T=k.selectedAccount,I=Pe().isTransactionLoading,E=Object(a.useState)("category"),N=Object(u.a)(E,2),M=N[0],D=N[1],W=Ft(),R=function(e){B(e),h(!0)};return Object(d.jsx)(w.a,{maxWidth:"md",children:T?Object(d.jsxs)(v.a,{display:"flex",children:[Object(d.jsx)(Vt,{}),Object(d.jsx)(v.a,{children:Object(d.jsxs)(m.a,{container:!0,align:"center",direction:"column",spacing:2,children:[Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(pe,{date:n,setDate:r,periodOfTime:i,setPeriodOfTime:s})}),I?Object(d.jsx)(Ct,{}):1===A.length?Object(d.jsx)(qt,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(Et,{date:n,periodOfTime:i})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsxs)(v.a,{mt:1,children:[Object(d.jsx)(Z.a,{className:W.incomeButton,onClick:function(){return R("INCOME")},children:Object(d.jsx)(Te.a,{fontSize:"large"})}),Object(d.jsx)(Z.a,{color:"inherit",onClick:function(){return p(!0)},children:Object(d.jsx)(Ce.a,{fontSize:"large"})}),Object(d.jsx)(Z.a,{className:W.outcomeButton,onClick:function(){return R("OUTCOME")},children:Object(d.jsx)(ge.a,{fontSize:"large"})})]})}),Object(d.jsxs)(m.a,{item:!0,children:[Object(d.jsxs)(v.a,{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",children:[Object(d.jsxs)(g.a,{children:["Group by ",M,"\xa0"]}),Object(d.jsx)(Z.a,{className:W.sortButton,size:"small",onClick:function(){return D("date"===M?"category":"date")},children:"date"===M?Object(d.jsx)(Se.a,{}):Object(d.jsx)(ke.a,{})})]}),Object(d.jsx)(vt,{sortBy:M,date:n,periodOfTime:i})]})," "]})]})}),Object(d.jsx)(Ke,{open:b,setOpen:h,transactionType:S}),Object(d.jsx)(Mt,{open:f,setOpen:p})]}):Object(d.jsx)(Ct,{})})}function Yt(e){var t=e.title;return Object(d.jsx)(g.a,{variant:"h4",align:"center",children:t})}var Kt=n(454),Ut=M.c({name:M.d("Enter account name").required("Account name is required"),startBalance:M.b("Enter account start balance").typeError("Start balance must be a number").required("Start balance is required")});function Ht(e){var t=e.open,n=e.setOpen,a=h().token,r=ze().setRefreshKey,c=function(){var e=Object(l.a)(s.a.mark((function e(t){var c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.name,o=t.startBalance,e.next=3,T({method:"post",url:"api/account",data:{name:c,startBalance:o,userId:a}});case 3:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=Object(I.a)({initialValues:{name:"",startBalance:0},validationSchema:Ut,onSubmit:c});return Object(d.jsxs)(Ie.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsx)(Ee.a,{children:"Add account"}),Object(d.jsx)(Ne.a,{children:Object(d.jsxs)("form",{onSubmit:o.handleSubmit,children:[Object(d.jsx)(Kt.a,{children:"Enter account details"}),Object(d.jsx)(x.a,{autoFocus:!0,margin:"dense",id:"name",label:"Account name",fullWidth:!0,value:o.values.name,onChange:o.handleChange,error:o.touched.name&&Boolean(o.errors.name),helperText:o.touched.name&&o.errors.name}),Object(d.jsx)(x.a,{margin:"dense",id:"startBalance",label:"Start balance",fullWidth:!0,value:o.values.startBalance,onChange:o.handleChange,error:o.touched.startBalance&&Boolean(o.errors.startBalance),helperText:o.touched.startBalance&&o.errors.startBalance}),Object(d.jsxs)(Me.a,{children:[Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Add"})]})]})})]})}var Gt=n(455),Jt=n(128),Xt=n.n(Jt),Qt=n(225),Zt=n.n(Qt),$t=n(224),_t=n.n($t),en=M.c({name:M.d("Enter account name").required("Account name is required"),startBalance:M.b("Enter account start balance").typeError("Start balance must be a number").required("Start balance is required")});function tn(e){var t=e.open,n=e.setOpen,a=e.account,r=ze().setRefreshKey,c=function(){var e=Object(l.a)(s.a.mark((function e(t){var c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.name,o=t.startBalance,e.next=3,T({method:"put",url:"api/account/".concat(a.id),data:{name:c,startBalance:o}});case 3:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=Object(I.a)({enableReinitialize:!0,initialValues:a||{name:"",startBalance:""},validationSchema:en,onSubmit:c});return Object(d.jsxs)(Ie.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsx)(Ee.a,{children:"Modify account"}),Object(d.jsx)(Ne.a,{children:Object(d.jsxs)("form",{onSubmit:o.handleSubmit,children:[Object(d.jsx)(x.a,{autoFocus:!0,margin:"dense",id:"name",label:"Account name",fullWidth:!0,value:o.values.name,onChange:o.handleChange,error:o.touched.name&&Boolean(o.errors.name),helperText:o.touched.name&&o.errors.name}),Object(d.jsx)(x.a,{margin:"dense",id:"startBalance",label:"Start balance balance",fullWidth:!0,value:o.values.startBalance,onChange:o.handleChange,error:o.touched.startBalance&&Boolean(o.errors.startBalance),helperText:o.touched.startBalance&&o.errors.startBalance}),Object(d.jsxs)(Me.a,{children:[Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Save"})]})]})})]})}function nn(e){var t=e.open,n=e.setOpen,a=e.handleAction;return Object(d.jsxs)(Ie.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsx)(Ee.a,{children:"Are you sure you want to delete this item?"}),Object(d.jsx)(Ne.a,{children:Object(d.jsxs)(Me.a,{children:[Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",onClick:a,children:"Delete"})]})})]})}var an=Object(U.a)((function(e){return{accountAvatar:{backgroundColor:e.green},accountItem:{backgroundColor:e.white,borderRadius:20,marginBottom:5}}}));function rn(e){var t=e.account,n=Object(a.useState)(!1),r=Object(u.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(!1),j=Object(u.a)(i,2),b=j[0],h=j[1],O=ze().setRefreshKey,m=an(),x=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({method:"delete",url:"api/account/".concat(t)});case 2:200===e.sent.status&&(h(!1),O((function(e){return e+1})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(P.a,{className:m.accountItem,children:[Object(d.jsx)(Ue.a,{children:Object(d.jsx)(He.a,{className:m.accountAvatar,variant:"rounded",children:Object(d.jsx)(Xt.a,{})})}),Object(d.jsx)(K.a,{primary:t.name,secondary:"Start balance: ".concat(t.startBalance)}),Object(d.jsxs)(Gt.a,{children:[Object(d.jsx)(Z.a,{edge:"end","aria-label":"edit",onClick:function(){return o(!0)},children:Object(d.jsx)(_t.a,{})}),Object(d.jsx)(Z.a,{edge:"end","aria-label":"delete",onClick:function(){return h(!0)},children:Object(d.jsx)(Zt.a,{})})]})]},t.id),Object(d.jsx)(tn,{open:c,setOpen:o,account:t}),Object(d.jsx)(nn,{open:b,setOpen:h,handleAction:function(){return x(t.id)}})]})}function cn(){var e=ze().accountList;return Object(d.jsx)(F.a,{children:e.filter((function(e){return 0!==e.id})).map((function(e){return Object(d.jsx)(rn,{account:e},e.id)}))})}function on(){var e=ze().isAccountLoading,t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(d.jsxs)(w.a,{maxWidth:"sm",children:[Object(d.jsxs)(m.a,{container:!0,align:"center",direction:"column",spacing:3,children:[Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(Yt,{title:"Manage accounts"})}),Object(d.jsx)(m.a,{item:!0,children:e?Object(d.jsx)(Ct,{}):Object(d.jsx)(cn,{})}),Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(f.a,{size:"large",variant:"contained",color:"primary",onClick:function(){return c(!0)},children:"Add account"})})]}),Object(d.jsx)(Ht,{open:r,setOpen:c})]})}var sn=n(226),ln=n.n(sn),un=n(227),dn=n.n(un);function jn(){var e=Object(a.useState)(new Date),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)("M"),o=Object(u.a)(c,2),i=o[0],s=o[1],l=ze().selectedAccount;return Object(d.jsx)(w.a,{maxWidth:"md",children:l?Object(d.jsxs)(v.a,{display:"flex",children:[Object(d.jsx)(Vt,{}),Object(d.jsx)(v.a,{children:Object(d.jsx)(m.a,{container:!0,align:"center",direction:"column",spacing:2,children:Object(d.jsx)(m.a,{item:!0,children:Object(d.jsx)(pe,{date:n,setDate:r,periodOfTime:i,setPeriodOfTime:s})})})})]}):Object(d.jsx)(Ct,{})})}var bn={account:{body:Object(d.jsx)(Pt,{}),icon:Object(d.jsx)(ln.a,{}),title:"Account page"},manageAccount:{body:Object(d.jsx)(on,{}),icon:Object(d.jsx)(Xt.a,{}),title:"Manage accounts"},accountStats:{body:Object(d.jsx)(jn,{}),icon:Object(d.jsx)(dn.a,{}),title:"Account stats"}},hn=Object(R.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(3),marginTop:60}}}));function On(){var e=Object(a.useState)("account"),t=Object(u.a)(e,2),n=t[0],r=t[1],c=hn();return Object(d.jsxs)("div",{className:c.root,children:[Object(d.jsx)(ce,{navItems:bn,currentNavItem:n,setCurrentNavItem:r}),Object(d.jsx)(qe,{children:Object(d.jsx)(Fe,{children:Object(d.jsx)("main",{className:c.content,children:bn[n].body})})})]})}var mn=n(228),xn=n(453),fn=n(456),pn=n(130),vn=n(129),gn=Object(mn.a)({palette:{primary:{main:"#85bb65"},secondary:{main:"#cdb68e"},background:{default:"#fafafa"}},white:"#fff",black:"#000",green:pn.a[500],red:vn.a[500]});var yn=function(){var e=h().token;return Object(d.jsxs)(xn.a,{theme:gn,children:[Object(d.jsx)(fn.a,{}),Object(d.jsx)(o.d,{children:e?Object(d.jsx)(o.b,{path:"/",children:Object(d.jsx)(On,{})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(o.b,{path:"/login",children:Object(d.jsx)(N,{})}),Object(d.jsx)(o.b,{path:"/register",children:Object(d.jsx)(W,{})}),Object(d.jsx)(o.b,{strict:!0,exact:!0,path:"/",children:Object(d.jsx)(o.a,{to:"/login"})})]})})]})};c.a.render(Object(d.jsx)(Rt.a,{children:Object(d.jsx)(b,{children:Object(d.jsx)(yn,{})})}),document.getElementById("root"))}},[[403,1,2]]]);
//# sourceMappingURL=main.5b03bcec.chunk.js.map