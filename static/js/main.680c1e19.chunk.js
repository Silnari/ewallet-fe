(this["webpackJsonpewallet-fe"]=this["webpackJsonpewallet-fe"]||[]).push([[0],{575:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(26),c=n.n(r),o=n(35),i=n(18),s=n.n(i),l=n(33),u=n(11),d=n(1),j=Object(a.createContext)({token:null}),b=function(e){var t=e.children,n=Object(a.useState)(""),r=Object(u.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(""),l=Object(u.a)(s,2),b=l[0],h=l[1],O=Object(o.g)();Object(a.useEffect)((function(){var e=localStorage.getItem("token");e&&i(e)}),[]);return Object(d.jsx)(j.Provider,{value:{token:c,logIn:function(e){localStorage.setItem("token",e),i(e),O.push("/")},logOut:function(){localStorage.removeItem("token"),i(null),O.push("/login")},registerSucess:b,setRegisterSuccess:h},children:t})},h=function(){return Object(a.useContext)(j)},O=n(601),x=n(602),m=n(644),f=n(607),p=n(645),g=n(597),v=n(137);function y(e){var t=e.welcomeText;return Object(d.jsxs)(g.a,{mb:4,children:[Object(d.jsxs)(v.a,{display:"inline",variant:"h4",align:"center",children:[t,"\xa0"]}),Object(d.jsx)(v.a,{display:"inline",variant:"h4",color:"primary",children:"eWallet"})]})}var C=n(576),w=n(599),S=Object(C.a)(w.a)({height:"100vh",alignItems:"center",justifyContent:"center",display:"flex"}),B=n(600),k=Object(C.a)(B.a)({padding:"20px 35px 20px 35px",width:390,minHeight:408}),A=n(308),T=n.n(A).a.create({baseURL:"https://ewallet-be.mybluemix.net/"}),M=n(53),E=n(641);function I(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],c=h(),i=c.logIn,j=c.registerSucess,b=c.setRegisterSuccess,g=Object(o.g)(),v=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.login,a=t.password,e.prev=1,e.next=4,T({method:"post",url:"api/user/authenticate",data:{login:n,password:a}});case 4:200===(c=e.sent).status&&i(c.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),401===e.t0.response.status?r("Invalid username or password"):r("Could not login");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),C=Object(M.a)({initialValues:{login:"",password:""},onSubmit:v});return Object(d.jsxs)(S,{children:[Object(d.jsx)(k,{children:Object(d.jsx)(O.a,{children:Object(d.jsx)("form",{onSubmit:C.handleSubmit,children:Object(d.jsxs)(x.a,{container:!0,align:"center",direction:"column",spacing:3,children:[Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(y,{welcomeText:"Log in to"})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(m.a,{id:"login",label:"Login",variant:"outlined",fullWidth:!0,size:"small",value:C.values.login,onChange:C.handleChange})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(m.a,{id:"password",type:"password",label:"Password",variant:"outlined",fullWidth:!0,size:"small",onChange:C.handleChange,value:C.values.password})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Login"})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(f.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){return g.push("/register")},children:"No account? Register"})})]})})})}),Object(d.jsx)(p.a,{open:!!n,autoHideDuration:7e3,onClose:function(){return r("")},children:Object(d.jsx)(E.a,{severity:"error",onClose:function(){return r("")},children:n})}),Object(d.jsx)(p.a,{open:!!j,autoHideDuration:7e3,onClose:function(){return b("")},children:Object(d.jsx)(E.a,{severity:"success",onClose:function(){return b("")},children:j})})]})}var N=n(25),W=N.c({email:N.d("Enter your email").email("Enter a valid email").required("Email is required"),login:N.d("Enter your login").required("Login is required"),password:N.d("Enter your password").min(5,"Password should be of minimum 5 characters length").required("Password is required")});function D(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],c=h().setRegisterSuccess,i=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.login,a=t.email,o=t.password,e.prev=1,e.next=4,T({method:"post",url:"api/user/register",data:{login:n,email:a,password:o}});case 4:200===e.sent.status&&(c("User registered successfully"),b.push("login/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),400===e.t0.response.status?r("Login is already taken"):r("Could not register user");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),j=Object(M.a)({initialValues:{login:"",email:"",password:""},validationSchema:W,onSubmit:i}),b=Object(o.g)();return Object(d.jsxs)(S,{children:[Object(d.jsx)(k,{children:Object(d.jsx)(O.a,{children:Object(d.jsx)("form",{onSubmit:j.handleSubmit,children:Object(d.jsxs)(x.a,{container:!0,align:"center",direction:"column",spacing:3,children:[Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(y,{welcomeText:"Register to"})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(m.a,{id:"login",label:"Login",variant:"outlined",fullWidth:!0,size:"small",value:j.values.login,onChange:j.handleChange,error:j.touched.login&&Boolean(j.errors.login),helperText:j.touched.login&&j.errors.login})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(m.a,{id:"email",label:"Email",variant:"outlined",fullWidth:!0,size:"small",value:j.values.email,onChange:j.handleChange,error:j.touched.email&&Boolean(j.errors.email),helperText:j.touched.email&&j.errors.email})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(m.a,{id:"password",type:"password",label:"Password",variant:"outlined",fullWidth:!0,size:"small",value:j.values.password,onChange:j.handleChange,error:j.touched.password&&Boolean(j.errors.password),helperText:j.touched.password&&j.errors.password})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Register"})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(f.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){return b.push("/login")},children:"Already have account? Log in"})})]})})})}),Object(d.jsx)(p.a,{open:!!n,autoHideDuration:7e3,onClose:function(){return r("")},children:Object(d.jsx)(E.a,{severity:"error",onClose:function(){return r("")},children:n})})]})}var R=n(353),L=n(613),q=n(622),z=n(637),V=n(200),F=n(198),P=n(608),Y=n(64),K=n(640),U=n(609),H=n(314),J=n.n(H),G=n(315),X=n.n(G),Q=n(244),Z=n(77),$=n.n(Z),_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ee=function(e,t){var n=$()(e);return"w"===t?n.startOf("isoweek").format("MMMM Do")+" - "+n.clone().startOf("isoweek").add(6,"d").format("MMMM Do[, ]YYYY"):"M"===t?n.format("MMMM[, ]YYYY"):"y"===t?n.format("YYYY"):void 0},te=function(e){return $()(e).format("dddd, MMMM Do YYYY")},ne=function(e,t){var n=$()(e);return"d"===t?n.add(7,t).toDate():n.add(1,t).toDate()},ae=Object(Q.a)((function(){var e;return{dateBox:(e={borderRadius:20,display:"inline-box",padding:"10px 20px 10px 20px",backgroundColor:"#fff",width:410},Object(Y.a)(e,"display","flex"),Object(Y.a)(e,"justifyContent","center"),e),datePicker:{minWidth:120}}}));function re(e){var t=e.date,n=e.setDate,r=e.periodOfTime,c=e.setPeriodOfTime,o=Object(a.useState)(!1),i=Object(u.a)(o,2),s=i[0],l=i[1],j=ae();return Object(d.jsxs)(x.a,{container:!0,direction:"column",spacing:1,children:[Object(d.jsx)(x.a,{item:!0,children:c?Object(d.jsxs)(K.a,{id:"period-of-time",value:r,onChange:function(e){var t=e.target.value;c(t),l(!1),n(new Date)},className:j.datePicker,children:[Object(d.jsx)(U.a,{value:"w",children:"Week"}),Object(d.jsx)(U.a,{value:"M",children:"Month"}),Object(d.jsx)(U.a,{value:"y",children:"Year"})]}):Object(d.jsx)(d.Fragment,{})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsxs)(x.a,{container:!0,direction:"row",alignItems:"center",justify:"center",children:[Object(d.jsx)(P.a,{color:"inherit",onClick:function(){n(function(e,t){var n=$()(e);return"d"===t?n.subtract(7,t).toDate():n.subtract(1,t).toDate()}(t,r)),l(!0)},children:Object(d.jsx)(J.a,{fontSize:"large"})}),Object(d.jsx)(g.a,{className:j.dateBox,children:Object(d.jsx)(v.a,{variant:"h6",children:ee(t,r)})}),Object(d.jsx)(P.a,{color:"inherit",onClick:function(){n(ne(t,r)),function(e,t){return $()(new Date).isSame($()(ne(e,t)),"day")}(t,r)&&l(!1)},disabled:!s,children:Object(d.jsx)(X.a,{fontSize:"large"})})]})})]})}var ce=n(339),oe=n.n(ce),ie=n(338),se=n.n(ie),le=n(188),ue=n.n(le),de=n(189),je=n.n(de),be=n(337),he=n.n(be),Oe=n(610),xe=n(611),me=n(612),fe=n(614),pe=n(105),ge=n(54),ve=n(638),ye=Object(a.createContext)();function Ce(e){var t=e.children,n=Object(a.useState)([]),r=Object(u.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(null),j=Object(u.a)(i,2),b=j[0],O=j[1],x=Object(a.useState)(!1),m=Object(u.a)(x,2),f=m[0],p=m[1],g=Object(a.useState)(0),v=Object(u.a)(g,2),y=v[0],C=v[1],w=h().token,S=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,T({method:"get",url:"api/account/".concat(w)});case 3:200===(t=e.sent).status&&(o(t.data),O(t.data[0]),p(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,T({method:"get",url:"api/account/".concat(w)});case 3:200===(t=e.sent).status&&(o(t.data),p(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){S()}),[]),Object(a.useEffect)((function(){return B()}),[y]);return Object(d.jsx)(ye.Provider,{value:{accountList:c,selectedAccount:b,setSelectedById:function(e){O(c.find((function(t){return t.id===e})))},setRefreshKey:C,isAccountLoading:f},children:t})}var we=function(){return Object(a.useContext)(ye)},Se=Object(a.createContext)();function Be(e){var t=e.children,n=Object(a.useState)([]),r=Object(u.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(!1),j=Object(u.a)(i,2),b=j[0],O=j[1],x=Object(a.useState)(0),m=Object(u.a)(x,2),f=m[0],p=m[1],g=we().selectedAccount,v=h().token,y=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==g&&null!==g){e.next=2;break}return e.abrupt("return");case 2:return O(!0),e.next=5,T({method:"get",url:"api/transaction/".concat(v,"/").concat(null===g||void 0===g?void 0:g.id)});case 5:if(t=e.sent,0!==g.id||200!==t.status){e.next=10;break}return o(t.data),O(!1),e.abrupt("return");case 10:return e.next=12,T({method:"get",url:"api/transfer/to/".concat(g.id)});case 12:return n=e.sent,e.next=15,T({method:"get",url:"api/transfer/from/".concat(g.id)});case 15:a=e.sent,200===t.status&&200===n.status&&200===a.status&&(o(t.data.concat(n.data.map((function(e){return e.transactionType="TRANSFER-INCOME",e.category="Transfer",e})),a.data.map((function(e){return e.transactionType="TRANSFER-OUTCOME",e.category="Transfer",e})))),O(!1));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return y()}),[g,f]),Object(d.jsx)(Se.Provider,{value:{transactionList:c,isTransactionLoading:b,setRefreshKey:p},children:t})}var ke=function(){return Object(a.useContext)(Se)},Ae=N.c({value:N.b().typeError("Value must be a number").positive("Value must be grater than zero").required("Value is required"),note:N.d("Enter note"),category:N.d("Enter category").required("Category is required"),date:N.a("Enter date").typeError("Enter date with valid format (dd/mm/yyyy)").max(new Date,"Date cannot be in the future").required("Date is required")});function Te(e){var t=e.open,n=e.setOpen,a=e.transactionType,r=ke().setRefreshKey,c=we(),o=c.accountList,i=c.selectedAccount,u=function(){var e=Object(l.a)(s.a.mark((function e(t){var c,o,i,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.account,o=t.value,i=t.note,l=t.category,u=t.date,e.next=3,T({method:"post",url:"api/transaction",data:{accountId:c,value:o,note:i,category:l,date:u,transactionType:a}});case 3:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=Object(M.a)({enableReinitialize:!0,initialValues:{account:0!==(null===i||void 0===i?void 0:i.id)?i.id:o[0].id,value:0,note:"",category:"",date:new Date((new Date).setHours(0,0,0,0))},validationSchema:Ae,onSubmit:u});return Object(d.jsxs)(Oe.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsxs)(xe.a,{children:["Add new ",a.toLowerCase()]}),Object(d.jsx)(me.a,{children:Object(d.jsxs)("form",{onSubmit:j.handleSubmit,children:[Object(d.jsx)(K.a,{id:"account",name:"account",value:j.values.account,fullWidth:!0,onChange:j.handleChange,error:j.touched.account&&Boolean(j.errors.account),children:o.filter((function(e){return 0!==e.id})).map((function(e){return Object(d.jsx)(U.a,{value:e.id,children:e.name},e.id)}))}),Object(d.jsx)(m.a,{margin:"dense",id:"value",label:"Value",fullWidth:!0,value:j.values.value,onChange:j.handleChange,error:j.touched.value&&Boolean(j.errors.value),helperText:j.touched.value&&j.errors.value}),Object(d.jsx)(m.a,{margin:"dense",id:"note",label:"Note",fullWidth:!0,value:j.values.note,onChange:j.handleChange,error:j.touched.note&&Boolean(j.errors.note),helperText:j.touched.note&&j.errors.note}),Object(d.jsx)(m.a,{margin:"dense",id:"category",label:"Category",fullWidth:!0,value:j.values.category,onChange:j.handleChange,error:j.touched.category&&Boolean(j.errors.category),helperText:j.touched.category&&j.errors.category}),Object(d.jsx)(ge.a,{utils:pe.a,children:Object(d.jsx)(ve.a,{disableToolbar:!0,maxDate:new Date,format:"MM/dd/yyyy",margin:"normal",id:"date",label:"Date",fullWidth:!0,autoOk:!0,KeyboardButtonProps:{"aria-label":"change date"},value:j.values.date,onChange:function(e){return j.setFieldValue("date",e)},error:j.touched.date&&Boolean(j.errors.date),helperText:j.touched.date&&j.errors.date})}),Object(d.jsxs)(fe.a,{children:[Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Add"})]})]})})]})}var Me=n(606),Ee=n(581),Ie=n(618),Ne=n(648),We=n(619),De=n(620),Re=n(621),Le=n(316),qe=n.n(Le),ze=n(317),Ve=n.n(ze),Fe=n(318),Pe=n.n(Fe),Ye=N.c({value:N.b().typeError("Value must be a number").positive("Value must be grater than zero").required("Value is required"),note:N.d("Enter note"),category:N.d("Enter category").required("Category is required"),date:N.a("Enter date").max(new Date,"Date cannot be in the future").required("Date is required")});function Ke(e){var t=e.open,n=e.setOpen,a=e.transaction,r=ke().setRefreshKey,c=function(){var e=Object(l.a)(s.a.mark((function e(t){var c,o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.value,o=t.note,i=t.category,l=t.date,e.next=3,T({method:"put",url:"/api/transaction/".concat(a.id),data:{value:c,note:o,category:i,date:l}});case 3:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({method:"delete",url:"/api/transaction/".concat(a.id)});case 2:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=Object(M.a)({enableReinitialize:!0,initialValues:a||{},validationSchema:Ye,onSubmit:c});return Object(d.jsxs)(Oe.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsx)(xe.a,{children:"Modify transaction"}),Object(d.jsx)(me.a,{children:Object(d.jsxs)("form",{onSubmit:i.handleSubmit,children:[Object(d.jsx)(m.a,{margin:"dense",id:"value",label:"Value",fullWidth:!0,value:i.values.value,onChange:i.handleChange,error:i.touched.value&&Boolean(i.errors.value),helperText:i.touched.value&&i.errors.value}),Object(d.jsx)(m.a,{margin:"dense",id:"note",label:"Note",fullWidth:!0,value:i.values.note,onChange:i.handleChange,error:i.touched.note&&Boolean(i.errors.note),helperText:i.touched.note&&i.errors.note}),Object(d.jsx)(m.a,{margin:"dense",id:"category",label:"Category",fullWidth:!0,value:i.values.category,onChange:i.handleChange,error:i.touched.category&&Boolean(i.errors.category),helperText:i.touched.category&&i.errors.category}),Object(d.jsx)(ge.a,{utils:pe.a,children:Object(d.jsx)(ve.a,{disableToolbar:!0,maxDate:new Date,format:"MM/dd/yyyy",margin:"normal",id:"date",label:"Date",fullWidth:!0,autoOk:!0,KeyboardButtonProps:{"aria-label":"change date"},value:i.values.date,onChange:function(e){return i.setFieldValue("date",e)},error:i.touched.date&&Boolean(i.errors.date),helperText:i.touched.date&&i.errors.date})}),Object(d.jsxs)(fe.a,{children:[Object(d.jsx)(f.a,{variant:"contained",color:"secondary",onClick:o,children:"Delete"}),Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Save"})]})]})})]})}var Ue=n(647),He=n(187),Je=n.n(He),Ge=N.c({value:N.b().typeError("Value must be a number").positive("Value must be grater than zero").required("Value is required"),note:N.d("Enter note"),date:N.a("Enter date").max(new Date,"Date cannot be in the future").required("Date is required")});function Xe(e){var t=e.open,n=e.setOpen,a=e.transfer,r=ke().setRefreshKey,c=we().accountList,o=function(){var e=Object(l.a)(s.a.mark((function e(t){var c,o,i,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.toAccount,o=t.fromAccount,i=t.value,l=t.note,u=t.date,e.next=3,T({method:"put",url:"api/transfer/".concat(a.id),data:{toAccountId:c,fromAccountId:o,value:i,note:l,date:u}});case 3:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({method:"delete",url:"/api/transfer/".concat(a.id)});case 2:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=Object(M.a)({enableReinitialize:!0,initialValues:a?{fromAccount:a.fromAccountId,toAccount:a.toAccountId,value:a.value,note:a.note,date:a.date}:{},validationSchema:Ge,onSubmit:o});return Object(d.jsxs)(Oe.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsx)(xe.a,{children:"Modify transfer"}),Object(d.jsx)(me.a,{children:Object(d.jsxs)("form",{onSubmit:u.handleSubmit,children:[Object(d.jsxs)(x.a,{container:!0,align:"center",direction:"row",children:[Object(d.jsxs)(x.a,{item:!0,xs:5,children:[Object(d.jsx)(Ue.a,{align:"left",htmlFor:"fromAccount",children:"From:"}),Object(d.jsx)(K.a,{id:"fromAccount",name:"fromAccount",fullWidth:!0,value:u.values.fromAccount,onChange:u.handleChange,error:u.touched.fromAccount&&Boolean(u.errors.fromAccount),children:c.filter((function(e){return 0!==e.id})).map((function(e){return Object(d.jsx)(U.a,{value:e.id,children:e.name},e.id)}))})]}),Object(d.jsx)(x.a,{item:!0,xs:2,style:{paddingTop:20},children:Object(d.jsx)(Je.a,{})}),Object(d.jsxs)(x.a,{item:!0,xs:5,children:[Object(d.jsx)(Ue.a,{align:"left",htmlFor:"toAccount",children:"To:"}),Object(d.jsx)(K.a,{fullWidth:!0,id:"toAccount",name:"toAccount",value:u.values.toAccount,onChange:u.handleChange,error:u.touched.toAccount&&Boolean(u.errors.toAccount),children:c.filter((function(e){return![u.values.fromAccount,0].includes(e.id)})).map((function(e){return Object(d.jsx)(U.a,{value:e.id,children:e.name},e.id)}))})]})]}),Object(d.jsx)(m.a,{margin:"dense",id:"value",label:"Value",fullWidth:!0,value:u.values.value,onChange:u.handleChange,error:u.touched.value&&Boolean(u.errors.value),helperText:u.touched.value&&u.errors.value}),Object(d.jsx)(m.a,{margin:"dense",id:"note",label:"Note",fullWidth:!0,value:u.values.note,onChange:u.handleChange,error:u.touched.note&&Boolean(u.errors.note),helperText:u.touched.note&&u.errors.note}),Object(d.jsx)(ge.a,{utils:pe.a,children:Object(d.jsx)(ve.a,{disableToolbar:!0,maxDate:new Date,format:"MM/dd/yyyy",margin:"normal",id:"date",label:"Date",fullWidth:!0,autoOk:!0,KeyboardButtonProps:{"aria-label":"change date"},value:u.values.date,onChange:function(e){return u.setFieldValue("date",e)},error:u.touched.date&&Boolean(u.errors.date),helperText:u.touched.date&&u.errors.date})}),Object(d.jsxs)(fe.a,{children:[Object(d.jsx)(f.a,{variant:"contained",color:"secondary",onClick:i,children:"Delete"}),Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Save"})]})]})})]})}var Qe=n(50),Ze=n(66),$e=n.n(Ze),_e=function(e){return tt(e,["INCOME","TRANSFER-INCOME"])},et=function(e){return tt(e,["OUTCOME","TRANSFER-OUTCOME"])},tt=function(e,t){return e.filter((function(e){return t.includes(e.transactionType)}))},nt=function(e){return $e.a.sumBy(_e(e),"value")-$e.a.sumBy(et(e),"value")},at=function(e,t){return $e.a.round(e+nt(t),2)},rt=function(e){return $e.a.round(nt(_e(e)),2)},ct=function(e){return-$e.a.round(nt(et(e)),2)},ot=function(e){return $e.a.round(nt(e),2)},it=function(e,t){var n=$e.a.orderBy($e.a.groupBy(e,t),[function(e){return $e.a.sumBy(e,"value")}],"desc");return $e.a.map(n,(function(e){return $e.a.orderBy(e,"value","desc")}))},st=function(e,t,n){return e.filter((function(e){return $()(e.date).isSame($()(t),function(e){return"w"===e?"isoWeek":"M"===e?"month":"year"}(n))}))},lt=function(e){var t=[];return Object(Qe.a)(new Set(e.map((function(e){return e.category})))).forEach((function(n){t.push({name:n,value:ct(e.filter((function(e){return e.category===n})))})})),t},ut=function(e,t){var n=$e.a.groupBy(e.filter((function(e){return t.includes(e.category)||t.includes("Income total")&&"INCOME"===e.transactionType||t.includes("Outcome total")&&"OUTCOME"===e.transactionType})),(function(e){return $()(e.date).startOf("month").format("MMM")})),a=[];return _.forEach((function(e,r){a.push({month:e}),t.forEach((function(t){n[e]&&(a[r][t]="Income total"===t?rt(n[e]):"Outcome total"===t?ct(n[e]):Math.abs(ot(n[e].filter((function(e){return e.category===t})))))}))})),a},dt=Object(Q.a)((function(e){return{nested:{marginLeft:e.spacing(4),borderRadius:50,width:450},transactionSubItem:{textAlign:"right"},icnomeItem:{color:e.green,backgroundColor:e.white,borderRadius:20,marginBottom:5},outcomeItem:{color:e.red,backgroundColor:e.white,borderRadius:20,marginBottom:5},incomeAvatar:{backgroundColor:e.green},outcomeAvatar:{backgroundColor:e.red},incomeIcon:{color:e.green},outcomeIcon:{color:e.red}}}));function jt(e){var t=e.header,n=e.icon,r=e.transactionList,c=e.sortBy,o=e.type,i=Object(a.useState)(!1),s=Object(u.a)(i,2),l=s[0],j=s[1],b=Object(a.useState)(!1),h=Object(u.a)(b,2),O=h[0],x=h[1],m=Object(a.useState)(!1),f=Object(u.a)(m,2),p=f[0],g=f[1],v=Object(a.useState)(null),y=Object(u.a)(v,2),C=y[0],w=y[1],S=we().accountList,B=dt(),k=function(e){return"category"===c?te(e.date):e.category};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(Ee.a,{className:"INCOME"===o?B.icnomeItem:B.outcomeItem,button:!0,onClick:function(){return j(!l)},children:[Object(d.jsx)(Ie.a,{children:Object(d.jsx)(Ne.a,{className:"INCOME"===o?B.incomeAvatar:B.outcomeAvatar,variant:"rounded",children:n})}),Object(d.jsx)(We.a,{primary:t,secondary:"Transactions: ".concat(null===r||void 0===r?void 0:r.length)}),Object(d.jsx)(We.a,{className:B.transactionSubItem,primary:"".concat(ot(r)," z\u0142")}),l?Object(d.jsx)(qe.a,{}):Object(d.jsx)(Ve.a,{})]},t+o),Object(d.jsx)(De.a,{in:l,timeout:"auto",unmountOnExit:!0,children:Object(d.jsx)(Me.a,{component:"div",disablePadding:!0,children:r.map((function(e){return Object(d.jsxs)(Ee.a,{className:B.nested,button:!0,onClick:function(){!function(e){w(e),["INCOME","OUTCOME"].includes(e.transactionType)?x(!0):g(!0)}(e)},children:[Object(d.jsx)(Re.a,{children:Object(d.jsx)(Pe.a,{fontSize:"small",className:"INCOME"===o?B.incomeIcon:B.outcomeIcon})}),Object(d.jsx)(We.a,{primary:"".concat(e.value," z\u0142"),secondary:e.note}),Object(d.jsx)(We.a,{className:B.transactionSubItem,secondary:k(e)})]},e.id)}))})}),Object(d.jsx)(Ke,{open:O,setOpen:x,transaction:C}),Object(d.jsx)(Xe,{open:p,setOpen:g,transfer:C,accountList:S})]})}function bt(e){var t=e.sortBy,n=e.date,a=e.periodOfTime,r=ke().transactionList,c=function(){return"category"===t?Object(d.jsx)(ue.a,{}):Object(d.jsx)(je.a,{})},o=function(e){return"date"===t?te(e[0].date):e[0].category};return Object(d.jsxs)(Me.a,{children:[it(st(_e(r),n,a),t).map((function(e){return Object(d.jsx)(jt,{type:"INCOME",icon:c(),transactionList:e,sortBy:t,header:o(e)},e[0][t]+"INCOME")})),it(st(et(r),n,a),t).map((function(e){return Object(d.jsx)(jt,{type:"OUTCOME",icon:c(),transactionList:e,sortBy:t,header:o(e)},e[0][t]+"OUTCOME")}))]})}var ht=n(616),Ot=Object(Q.a)((function(e){return{spinner:{height:"40vh",alignItems:"center",justifyContent:"center",display:"flex"}}}));function xt(){var e=Ot();return Object(d.jsx)(g.a,{className:e.spinner,children:Object(d.jsx)(ht.a,{})})}var mt=n(307),ft=n(319),pt=n.n(ft),gt=Object(Q.a)((function(e){return{root:{position:"relative"},content:function(t){return{padding:"15px 14px",borderRadius:10,width:195,height:50,fontWeight:"bold",backgroundColor:e.white,color:t.color}},inputLabel:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"}}}));function vt(e){var t=e.id,n=e.label,r=e.children,o=e.color,i=Object(a.useState)(0),s=Object(u.a)(i,2),l=s[0],j=s[1],b=Object(a.useRef)(null),h=gt({color:o});return Object(a.useEffect)((function(){var e=c.a.findDOMNode(b.current);j(null!=e?e.offsetWidth:0)}),[n]),Object(d.jsxs)("div",{style:{position:"relative",marginTop:"8px"},children:[Object(d.jsx)(Ue.a,{ref:b,htmlFor:t,variant:"outlined",className:h.inputLabel,shrink:!0,children:n}),Object(d.jsx)("div",{className:h.root,children:Object(d.jsxs)("div",{id:t,className:h.content,children:[r,Object(d.jsx)(pt.a,{notched:!0,labelWidth:l})]})})]})}var yt=Object(mt.a)(g.a)({border:"2px solid",borderRadius:10,padding:10,width:195,fontWeight:"bold",backgroundColor:"#fff"}),Ct=Object(L.a)((function(e){return{positiveBalance:{color:e.green},negativeBalance:{color:e.red},positiveBalanceBox:{borderColor:e.green},negativeBalanceBox:{borderColor:e.red}}}));function wt(e){var t=e.date,n=e.periodOfTime,a=Ct(),r=ke().transactionList,c=we().selectedAccount,o=st(r,t,n);return Object(d.jsx)(g.a,{children:Object(d.jsxs)(x.a,{container:!0,alignItems:"center",direction:"column",spacing:1,children:[Object(d.jsx)(x.a,{item:!0,children:Object(d.jsxs)(x.a,{container:!0,spacing:2,children:[Object(d.jsx)(x.a,{item:!0,children:Object(d.jsxs)(yt,{className:"".concat(a.positiveBalanceBox," ").concat(a.positiveBalance),children:[rt(o)," z\u0142"]})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsxs)(yt,{className:"".concat(a.negativeBalanceBox," ").concat(a.negativeBalance),children:[ct(o)," z\u0142"]})})]})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsxs)(x.a,{container:!0,spacing:2,children:[Object(d.jsx)(x.a,{item:!0,children:Object(d.jsxs)(vt,{id:"monthly",label:"Monthly",color:ot(o)>0?"green":"red",children:[ot(o)," z\u0142"]})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsxs)(vt,{id:"account",label:"Account",color:at(c.startBalance,r)>0?"green":"red",children:[at(c.startBalance,r)," ","z\u0142"]})})]})})]})})}var St=N.c({value:N.b().typeError("Value must be a number").positive("Value must be grater than zero").required("Value is required"),note:N.d("Enter note"),date:N.a("Enter date").max(new Date,"Date cannot be in the future").required("Date is required")});function Bt(e){var t,n=e.open,a=e.setOpen,r=ke().setRefreshKey,c=we(),o=c.accountList,i=c.selectedAccount,u=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,c,o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.toAccount,c=t.fromAccount,o=t.value,i=t.note,l=t.date,e.next=3,T({method:"post",url:"api/transfer",data:{toAccountId:n,fromAccountId:c,value:o,note:i,date:l}});case 3:200===e.sent.status&&(a(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=Object(M.a)({enableReinitialize:!0,initialValues:{fromAccount:0!==i.id?i.id:o[0].id,toAccount:null===(t=o[1])||void 0===t?void 0:t.id,value:0,note:"",date:new Date((new Date).setHours(0,0,0,0))},validationSchema:St,onSubmit:u});return Object(d.jsxs)(Oe.a,{open:n,onClose:function(){return a(!1)},children:[Object(d.jsx)(xe.a,{children:"Add new transfer"}),Object(d.jsx)(me.a,{children:Object(d.jsxs)("form",{onSubmit:j.handleSubmit,children:[Object(d.jsxs)(x.a,{container:!0,align:"center",direction:"row",children:[Object(d.jsxs)(x.a,{item:!0,xs:5,children:[Object(d.jsx)(Ue.a,{align:"left",htmlFor:"fromAccount",children:"From:"}),Object(d.jsx)(K.a,{id:"fromAccount",name:"fromAccount",fullWidth:!0,value:j.values.fromAccount,onChange:j.handleChange,error:j.touched.fromAccount&&Boolean(j.errors.fromAccount),children:o.filter((function(e){return 0!==e.id})).map((function(e){return Object(d.jsx)(U.a,{value:e.id,children:e.name},e.id)}))})]}),Object(d.jsx)(x.a,{item:!0,xs:2,style:{paddingTop:20},children:Object(d.jsx)(Je.a,{})}),Object(d.jsxs)(x.a,{item:!0,xs:5,children:[Object(d.jsx)(Ue.a,{align:"left",htmlFor:"toAccount",children:"To:"}),Object(d.jsx)(K.a,{fullWidth:!0,id:"toAccount",name:"toAccount",value:j.values.toAccount,onChange:j.handleChange,error:j.touched.toAccount&&Boolean(j.errors.toAccount),children:o.filter((function(e){return![j.values.fromAccount,0].includes(e.id)})).map((function(e){return Object(d.jsx)(U.a,{value:e.id,children:e.name},e.id)}))})]})]}),Object(d.jsx)(m.a,{margin:"dense",id:"value",label:"Value",fullWidth:!0,value:j.values.value,onChange:j.handleChange,error:j.touched.value&&Boolean(j.errors.value),helperText:j.touched.value&&j.errors.value}),Object(d.jsx)(m.a,{margin:"dense",id:"note",label:"Note",fullWidth:!0,value:j.values.note,onChange:j.handleChange,error:j.touched.note&&Boolean(j.errors.note),helperText:j.touched.note&&j.errors.note}),Object(d.jsx)(ge.a,{utils:pe.a,children:Object(d.jsx)(ve.a,{disableToolbar:!0,maxDate:new Date,format:"MM/dd/yyyy",margin:"normal",id:"date",label:"Date",fullWidth:!0,autoOk:!0,KeyboardButtonProps:{"aria-label":"change date"},value:j.values.date,onChange:function(e){return j.setFieldValue("date",e)},error:j.touched.date&&Boolean(j.errors.date),helperText:j.touched.date&&j.errors.date})}),Object(d.jsxs)(fe.a,{children:[Object(d.jsx)(f.a,{onClick:function(){return a(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Add"})]})]})})]})}var kt=n(320),At=n.n(kt),Tt=n(97),Mt=Object(Q.a)((function(e){return{tabName:{color:e.green},infoBox:{border:"2px solid",borderRadius:10,padding:15,borderColor:e.green,backgroundColor:e.white}}}));function Et(){var e=Mt();return Object(d.jsxs)(g.a,{mt:2,className:e.infoBox,children:[Object(d.jsx)(At.a,{fontSize:"large",className:e.tabName}),Object(d.jsxs)(v.a,{variant:"h6",children:["Please add your first account in"," ",Object(d.jsx)(Tt.b,{to:"/manageAccount",className:e.tabName,children:"Manage accounts"})," ","tab"]})]})}var It=Object(C.a)(K.a)({maxHeight:50,minWidth:162,maxWidth:162,marginLeft:-20,marginRight:20,backgroundColor:"#fff"});function Nt(){var e=we(),t=e.accountList,n=e.selectedAccount,a=e.setSelectedById;return Object(d.jsx)(It,{variant:"outlined",value:n.id,onChange:function(e){a(e.target.value)},children:t.map((function(e){return Object(d.jsx)(U.a,{value:e.id,children:e.name},e.id)}))})}var Wt=n(197),Dt=n(623),Rt=n(196),Lt=n(199),qt=n(624),zt=n(625),Vt=n(626),Ft=n(627),Pt=n(154),Yt=n(643),Kt=n(331),Ut=n(334),Ht=[F.a[500],Wt.a[500],Dt.a[500],Rt.a[500],Lt.a[500],qt.a[500],zt.a[500],V.a[500],Vt.a[500],Ft.a[500]],Jt=function(e){var t=Math.PI/180,n=e.cx,a=e.cy,r=e.midAngle,c=e.innerRadius,o=e.outerRadius,i=e.startAngle,s=e.endAngle,l=e.fill,u=e.payload,j=e.percent,b=e.value,h=Math.sin(-t*r),O=Math.cos(-t*r),x=n+(o+10)*O,m=a+(o+10)*h,f=n+(o+30)*O,p=a+(o+30)*h,g=f+22*(O>=0?1:-1),v=p,y=O>=0?"start":"end";return Object(d.jsxs)("g",{children:[Object(d.jsx)("text",{x:n,y:a,dy:8,textAnchor:"middle",fill:l,fontWeight:"bold",children:u.name}),Object(d.jsx)(Pt.a,{cx:n,cy:a,innerRadius:c,outerRadius:o,startAngle:i,endAngle:s,fill:l}),Object(d.jsx)(Pt.a,{cx:n,cy:a,startAngle:i,endAngle:s,innerRadius:o+6,outerRadius:o+10,fill:l}),Object(d.jsx)("path",{d:"M".concat(x,",").concat(m,"L").concat(f,",").concat(p,"L").concat(g,",").concat(v),stroke:l,fill:"none"}),Object(d.jsx)("circle",{cx:g,cy:v,r:2,fill:l,stroke:"none"}),Object(d.jsx)("text",{x:g+12*(O>=0?1:-1),y:v,textAnchor:y,fill:"#333",children:"".concat(b,"z\u0142")}),Object(d.jsx)("text",{x:g+12*(O>=0?1:-1),y:v,dy:18,textAnchor:y,fill:"#999",children:"(".concat((100*j).toFixed(2),"%)")})]})};function Gt(e){var t=e.date,n=e.periodOfTime,r=Object(a.useState)(0),c=Object(u.a)(r,2),o=c[0],i=c[1],s=Object(a.useCallback)((function(e,t){i(t)}),[i]),l=ke().transactionList,j=lt(st(l,t,n));return console.log(lt(st(l,t,n))),Object(d.jsx)(Yt.a,{width:500,height:350,children:Object(d.jsx)(Kt.a,{data:j,activeIndex:o,activeShape:Jt,dataKey:"value",innerRadius:75,outerRadius:125,onMouseEnter:s,paddingAngle:1,children:j.map((function(e,t){return Object(d.jsx)(Ut.a,{fill:Ht[t%Ht.length]},"cell-".concat(t))}))})})}var Xt=Object(Q.a)((function(e){return{incomeButton:{color:e.green},outcomeButton:{color:e.red},sortButton:{color:e.black,backgroundColor:e.white},accountPicker:{maxHeight:50,minWidth:162,maxWidth:162,marginLeft:-20,marginRight:20,backgroundColor:e.white}}}));function Qt(){var e=Object(a.useState)(new Date),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)("M"),o=Object(u.a)(c,2),i=o[0],s=o[1],l=Object(a.useState)(!1),j=Object(u.a)(l,2),b=j[0],h=j[1],O=Object(a.useState)(!1),m=Object(u.a)(O,2),f=m[0],p=m[1],y=Object(a.useState)("INCOME"),C=Object(u.a)(y,2),S=C[0],B=C[1],k=we(),A=k.accountList,T=k.selectedAccount,M=ke().isTransactionLoading,E=Object(a.useState)("category"),I=Object(u.a)(E,2),N=I[0],W=I[1],D=Xt(),R=function(e){B(e),h(!0)};return Object(d.jsx)(w.a,{maxWidth:"md",children:T?Object(d.jsxs)(g.a,{display:"flex",children:[Object(d.jsx)(Nt,{}),Object(d.jsx)(g.a,{children:Object(d.jsxs)(x.a,{container:!0,align:"center",direction:"column",spacing:2,children:[Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(re,{date:n,setDate:r,periodOfTime:i,setPeriodOfTime:s})}),M?Object(d.jsx)(xt,{}):1===A.length?Object(d.jsx)(Et,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(wt,{date:n,periodOfTime:i})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(Gt,{date:n,periodOfTime:i})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsxs)(g.a,{mt:1,children:[Object(d.jsx)(P.a,{className:D.incomeButton,onClick:function(){return R("INCOME")},children:Object(d.jsx)(he.a,{fontSize:"large"})}),Object(d.jsx)(P.a,{color:"inherit",onClick:function(){return p(!0)},children:Object(d.jsx)(se.a,{fontSize:"large"})}),Object(d.jsx)(P.a,{className:D.outcomeButton,onClick:function(){return R("OUTCOME")},children:Object(d.jsx)(oe.a,{fontSize:"large"})})]})}),Object(d.jsxs)(x.a,{item:!0,children:[Object(d.jsxs)(g.a,{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",children:[Object(d.jsxs)(v.a,{children:["Group by ",N,"\xa0"]}),Object(d.jsx)(P.a,{className:D.sortButton,size:"small",onClick:function(){return W("date"===N?"category":"date")},children:"date"===N?Object(d.jsx)(ue.a,{}):Object(d.jsx)(je.a,{})})]}),Object(d.jsx)(bt,{sortBy:N,date:n,periodOfTime:i})]})," "]})]})}),Object(d.jsx)(Te,{open:b,setOpen:h,transactionType:S}),Object(d.jsx)(Bt,{open:f,setOpen:p})]}):Object(d.jsx)(xt,{})})}var Zt=n(631),$t=n(632),_t=n(355),en=n(341),tn=n(342),nn=n(162);function an(e){var t=e.date,n=e.categoryList,a=ke().transactionList,r=700,c=function(){var e=V.a[r];return 800===(r+=100)&&(r=300),e},o=700,i=function(){var e=F.a[o];return 800===(o+=100)&&(o=300),e};return Object(d.jsx)(Zt.a,{width:"100%",height:300,children:Object(d.jsxs)($t.a,{data:ut(st(a,t,"y"),n.map((function(e){return e.split("^")[0]}))),children:[n.map((function(e){var t=e.split("^");return Object(d.jsx)(_t.a,{name:t[0],type:"monotone",strokeWidth:6,dataKey:t[0],stroke:"INCOME"===t[1]?c():i()},e)})),Object(d.jsx)(en.a,{dataKey:"month"}),Object(d.jsx)(tn.a,{}),Object(d.jsx)(nn.a,{})]})})}function rn(e){var t=e.setSearchCategoryText;return Object(d.jsx)(w.a,{maxWidth:"xs",children:Object(d.jsx)(m.a,{fullWidth:!0,label:"Search category",margin:"normal",variant:"outlined",onChange:function(e){t(e.target.value)}})})}var cn=n(642),on=n(343),sn=n.n(on),ln=n(344),un=n.n(ln),dn=n(354),jn=Object(Q.a)((function(e){return{categoryItem:{backgroundColor:e.white,borderRadius:10},incomeIcon:{color:e.green},outcomeIcon:{color:e.red},icon:{marginLeft:e.spacing(3)}}}));function bn(e){var t=e.checked,n=e.setChecked,a=e.categoryList,r=e.searchCategoryText,c=jn(),o=a.filter((function(e){return e.toLowerCase().startsWith(r.toLowerCase())}));return Object(d.jsx)(w.a,{maxWidth:"xs",children:Object(d.jsx)(dn.a,{height:300,width:400,itemSize:50,itemCount:o.length,children:function(e){var a,r=e.index,i=e.style,s=o[r].split("^");return Object(d.jsxs)(Ee.a,{style:i,className:c.categoryItem,dense:!0,button:!0,onClick:(a=o[r],function(){var e=t.indexOf(a),r=Object(Qe.a)(t);-1===e?r.push(a):r.splice(e,1),n(r)}),children:[Object(d.jsx)(Re.a,{children:Object(d.jsx)(cn.a,{edge:"start",checked:-1!==t.indexOf(o[r])})}),Object(d.jsx)(We.a,{primary:s[0]}),Object(d.jsx)(Re.a,{children:"INCOME"===s[1]?Object(d.jsx)(sn.a,{className:"".concat(c.icon," ").concat(c.incomeIcon)}):Object(d.jsx)(un.a,{className:"".concat(c.icon," ").concat(c.outcomeIcon)})})]},o[r])}})})}var hn=Object(mt.a)(g.a)({backgroundColor:"#fff",borderRadius:20,padding:"8px 28px 8px 8px"});function On(){var e=Object(a.useState)(["Income total^INCOME","Outcome total^OUTCOME"]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(new Date),o=Object(u.a)(c,2),i=o[0],s=o[1],l=Object(a.useState)(""),j=Object(u.a)(l,2),b=j[0],h=j[1],O=we().selectedAccount,m=ke(),f=m.transactionList,p=m.isTransactionLoading,g=["Income total^INCOME","Outcome total^OUTCOME"].concat(Object(Qe.a)(f.filter((function(e){return["INCOME","OUTCOME"].includes(e.transactionType)})).map((function(e){return"".concat(e.category,"^").concat("INCOME"===e.transactionType?"INCOME":"OUTCOME")})).filter((function(e,t,n){return n.indexOf(e)===t})))).sort((function(e,t){return e.category-t.category}));return Object(d.jsx)(w.a,{maxWidth:"md",children:O?Object(d.jsxs)(x.a,{container:!0,align:"center",direction:"column",spacing:2,children:[Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(re,{date:i,setDate:s,periodOfTime:"y"})}),p?Object(d.jsx)(xt,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(hn,{children:Object(d.jsx)(an,{date:i,categoryList:n})})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(rn,{setSearchCategoryText:h})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(bn,{searchCategoryText:b,categoryList:g,checked:n,setChecked:r})}),Object(d.jsx)(x.a,{item:!0})]})]}):Object(d.jsx)(xt,{})})}function xn(e){var t=e.title;return Object(d.jsx)(v.a,{variant:"h4",align:"center",children:t})}var mn=n(633),fn=N.c({name:N.d("Enter account name").required("Account name is required"),startBalance:N.b("Enter account start balance").typeError("Start balance must be a number").required("Start balance is required")});function pn(e){var t=e.open,n=e.setOpen,a=h().token,r=we().setRefreshKey,c=function(){var e=Object(l.a)(s.a.mark((function e(t){var c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.name,o=t.startBalance,e.next=3,T({method:"post",url:"api/account",data:{name:c,startBalance:o,userId:a}});case 3:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=Object(M.a)({initialValues:{name:"",startBalance:0},validationSchema:fn,onSubmit:c});return Object(d.jsxs)(Oe.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsx)(xe.a,{children:"Add account"}),Object(d.jsx)(me.a,{children:Object(d.jsxs)("form",{onSubmit:o.handleSubmit,children:[Object(d.jsx)(mn.a,{children:"Enter account details"}),Object(d.jsx)(m.a,{autoFocus:!0,margin:"dense",id:"name",label:"Account name",fullWidth:!0,value:o.values.name,onChange:o.handleChange,error:o.touched.name&&Boolean(o.errors.name),helperText:o.touched.name&&o.errors.name}),Object(d.jsx)(m.a,{margin:"dense",id:"startBalance",label:"Start balance",fullWidth:!0,value:o.values.startBalance,onChange:o.handleChange,error:o.touched.startBalance&&Boolean(o.errors.startBalance),helperText:o.touched.startBalance&&o.errors.startBalance}),Object(d.jsxs)(fe.a,{children:[Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Add"})]})]})})]})}var gn=n(634),vn=n(194),yn=n.n(vn),Cn=n(346),wn=n.n(Cn),Sn=n(345),Bn=n.n(Sn),kn=N.c({name:N.d("Enter account name").required("Account name is required"),startBalance:N.b("Enter account start balance").typeError("Start balance must be a number").required("Start balance is required")});function An(e){var t=e.open,n=e.setOpen,a=e.account,r=we().setRefreshKey,c=function(){var e=Object(l.a)(s.a.mark((function e(t){var c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.name,o=t.startBalance,e.next=3,T({method:"put",url:"api/account/".concat(a.id),data:{name:c,startBalance:o}});case 3:200===e.sent.status&&(n(!1),r((function(e){return e+1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=Object(M.a)({enableReinitialize:!0,initialValues:a||{name:"",startBalance:""},validationSchema:kn,onSubmit:c});return Object(d.jsxs)(Oe.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsx)(xe.a,{children:"Modify account"}),Object(d.jsx)(me.a,{children:Object(d.jsxs)("form",{onSubmit:o.handleSubmit,children:[Object(d.jsx)(m.a,{autoFocus:!0,margin:"dense",id:"name",label:"Account name",fullWidth:!0,value:o.values.name,onChange:o.handleChange,error:o.touched.name&&Boolean(o.errors.name),helperText:o.touched.name&&o.errors.name}),Object(d.jsx)(m.a,{margin:"dense",id:"startBalance",label:"Start balance balance",fullWidth:!0,value:o.values.startBalance,onChange:o.handleChange,error:o.touched.startBalance&&Boolean(o.errors.startBalance),helperText:o.touched.startBalance&&o.errors.startBalance}),Object(d.jsxs)(fe.a,{children:[Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",variant:"outlined",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",variant:"contained",type:"submit",children:"Save"})]})]})})]})}function Tn(e){var t=e.open,n=e.setOpen,a=e.handleAction;return Object(d.jsxs)(Oe.a,{open:t,onClose:function(){return n(!1)},children:[Object(d.jsx)(xe.a,{children:"Are you sure you want to delete this item?"}),Object(d.jsx)(me.a,{children:Object(d.jsxs)(fe.a,{children:[Object(d.jsx)(f.a,{onClick:function(){return n(!1)},color:"primary",children:"Cancel"}),Object(d.jsx)(f.a,{color:"primary",onClick:a,children:"Delete"})]})})]})}var Mn=Object(Q.a)((function(e){return{accountAvatar:{backgroundColor:e.green},accountItem:{backgroundColor:e.white,borderRadius:20,marginBottom:5}}}));function En(e){var t=e.account,n=Object(a.useState)(!1),r=Object(u.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(!1),j=Object(u.a)(i,2),b=j[0],h=j[1],O=we().setRefreshKey,x=Mn(),m=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({method:"delete",url:"api/account/".concat(t)});case 2:200===e.sent.status&&(h(!1),O((function(e){return e+1})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(Ee.a,{className:x.accountItem,children:[Object(d.jsx)(Ie.a,{children:Object(d.jsx)(Ne.a,{className:x.accountAvatar,variant:"rounded",children:Object(d.jsx)(yn.a,{})})}),Object(d.jsx)(We.a,{primary:t.name,secondary:"Start balance: ".concat(t.startBalance)}),Object(d.jsxs)(gn.a,{children:[Object(d.jsx)(P.a,{edge:"end","aria-label":"edit",onClick:function(){return o(!0)},children:Object(d.jsx)(Bn.a,{})}),Object(d.jsx)(P.a,{edge:"end","aria-label":"delete",onClick:function(){return h(!0)},children:Object(d.jsx)(wn.a,{})})]})]},t.id),Object(d.jsx)(An,{open:c,setOpen:o,account:t}),Object(d.jsx)(Tn,{open:b,setOpen:h,handleAction:function(){return m(t.id)}})]})}function In(){var e=we().accountList;return Object(d.jsx)(Me.a,{children:e.filter((function(e){return 0!==e.id})).map((function(e){return Object(d.jsx)(En,{account:e},e.id)}))})}function Nn(){var e=we().isAccountLoading,t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(d.jsxs)(w.a,{maxWidth:"sm",children:[Object(d.jsxs)(x.a,{container:!0,align:"center",direction:"column",spacing:3,children:[Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(xn,{title:"Manage accounts"})}),Object(d.jsx)(x.a,{item:!0,children:e?Object(d.jsx)(xt,{}):Object(d.jsx)(In,{})}),Object(d.jsx)(x.a,{item:!0,children:Object(d.jsx)(f.a,{size:"large",variant:"contained",color:"primary",onClick:function(){return c(!0)},children:"Add account"})})]}),Object(d.jsx)(pn,{open:r,setOpen:c})]})}var Wn=n(350),Dn=n.n(Wn),Rn=n(351),Ln=n.n(Rn),qn=n(347),zn=n(649),Vn=n(635),Fn=n(6),Pn=Object(Q.a)((function(e){return{drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(Y.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(qn.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(0,1)},e.mixins.toolbar)}}));function Yn(e){var t,n,a=e.drawerOpen,r=e.items,c=Pn(),i=Object(o.g)(),s=Object(o.h)().pathname.substring(1);return Object(d.jsxs)(zn.a,{variant:"permanent",className:Object(Fn.default)(c.drawer,(t={},Object(Y.a)(t,c.drawerOpen,a),Object(Y.a)(t,c.drawerClose,!a),t)),classes:{paper:Object(Fn.default)((n={},Object(Y.a)(n,c.drawerOpen,a),Object(Y.a)(n,c.drawerClose,!a),n))},children:[Object(d.jsx)("div",{className:c.toolbar,children:Object(d.jsx)(v.a,{variant:"h6",color:"primary",children:"eWallet"})}),Object(d.jsx)(Vn.a,{}),Object(d.jsx)(Me.a,{children:Object.entries(r).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(d.jsxs)(Ee.a,{button:!0,onClick:function(){return i.push(n)},selected:n===s,children:[Object(d.jsx)(Re.a,{children:a.icon}),Object(d.jsx)(We.a,{primary:a.title})]},n)}))})]})}var Kn=n(636),Un=n(617),Hn=n(357),Jn=n(348),Gn=n.n(Jn),Xn=n(349),Qn=n.n(Xn),Zn=Object(Q.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},logoutButton:{marginLeft:"auto"}}}));function $n(e){var t=e.drawerOpen,n=e.handleDrawerOpen,a=e.handleDrawerClose,r=Zn(),c=h().logOut;return Object(d.jsx)(Kn.a,{position:"fixed",className:Object(Fn.default)(r.appBar,Object(Y.a)({},r.appBarShift,t)),children:Object(d.jsxs)(Un.a,{children:[Object(d.jsx)(P.a,{color:"inherit","aria-label":"open drawer",onClick:t?a:n,edge:"start",className:r.menuButton,children:Object(d.jsx)(Gn.a,{})}),Object(d.jsx)(Hn.a,{in:!t,children:Object(d.jsx)(v.a,{variant:"h6",noWrap:!0,children:"eWallet"})}),Object(d.jsx)(P.a,{color:"inherit",className:r.logoutButton,onClick:c,children:Object(d.jsx)(Qn.a,{})})]})})}function _n(e){var t=e.navItems,n=Object(a.useState)(!1),r=Object(u.a)(n,2),c=r[0],o=r[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)($n,{drawerOpen:c,handleDrawerClose:function(){o(!1)},handleDrawerOpen:function(){o(!0)}}),Object(d.jsx)(Yn,{drawerOpen:c,items:t})]})}var ea=Object(R.a)({palette:{primary:{main:"#85bb65"},secondary:{main:"#ffc400"},background:{default:"#fafafa"}},white:"#fff",black:"#000",green:V.a[500],red:F.a[500]}),ta=Object(L.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(3),marginTop:60}}})),na={account:{icon:Object(d.jsx)(Dn.a,{}),title:"Account page"},accountStats:{icon:Object(d.jsx)(Ln.a,{}),title:"Account stats"},manageAccount:{icon:Object(d.jsx)(yn.a,{}),title:"Manage accounts"}};var aa=function(){var e=h().token,t=ta();return Object(d.jsxs)(q.a,{theme:ea,children:[Object(d.jsx)(z.a,{}),Object(d.jsx)(o.d,{children:e?Object(d.jsx)(Ce,{children:Object(d.jsx)(Be,{children:Object(d.jsxs)("div",{className:t.root,children:[Object(d.jsx)(_n,{navItems:na}),Object(d.jsxs)("div",{className:t.content,children:[Object(d.jsx)(o.b,{path:"/account",children:Object(d.jsx)(Qt,{})}),Object(d.jsx)(o.b,{path:"/accountStats",children:Object(d.jsx)(On,{})}),Object(d.jsx)(o.b,{path:"/manageAccount",children:Object(d.jsx)(Nn,{})}),Object(d.jsx)(o.b,{strict:!0,exact:!0,path:"/",children:Object(d.jsx)(o.a,{to:"/account"})})]})]})})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(o.b,{path:"/login",children:Object(d.jsx)(I,{})}),Object(d.jsx)(o.b,{path:"/register",children:Object(d.jsx)(D,{})}),Object(d.jsx)(o.b,{strict:!0,exact:!0,path:"/",children:Object(d.jsx)(o.a,{to:"/login"})})]})})]})};c.a.render(Object(d.jsx)(Tt.a,{children:Object(d.jsx)(b,{children:Object(d.jsx)(aa,{})})}),document.getElementById("root"))}},[[575,1,2]]]);
//# sourceMappingURL=main.680c1e19.chunk.js.map